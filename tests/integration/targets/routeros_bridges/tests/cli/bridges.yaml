---
- debug: msg="START connection={{ ansible_connection }} routeros_bridges tests"

- name: ensure the tests bridges does not exists first
  kilip.routeros.routeros_bridges: &id001
    config:
    - name: "br-new1"
    - name: "br-new2"
    state: deleted

- name: creates new routeros_bridges
  kilip.routeros.routeros_bridges: &id002
    config:
    - name: "br-new1"
      comment: br-new1 creeate
    - name: "br-new2"
      comment: br-new2 create
  register: result
- assert:
    that:
      - result.changed

- name: test should not update with same value
  kilip.routeros.routeros_bridges: *id002
  register: result
- assert:
    that:
      - not result.changed

- name: test update bridge
  kilip.routeros.routeros_bridges:
    config:
    - name: br-new1
      comment: br-new1 update
  register: result
- assert:
    that:
      - result.changed

- name: test delete bridge
  kilip.routeros.routeros_bridges: *id001
- assert:
    that:
      - result.changed